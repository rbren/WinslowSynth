<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script>
window.addEventListener("load", function(evt) {
    var ws = new WebSocket("ws://" + window.location.host + "/connect");
    ws.onopen = function(evt) {
        console.log("OPEN");
    }
    ws.onclose = function(evt) {
        console.log("CLOSE");
        ws = null;
    }
    ws.onmessage = function(evt) {
        console.log("RESPONSE: " + evt.data);
    }
    ws.onerror = function(evt) {
        console.log("ERROR: " + evt.data);
    }
    document.onkeyup = function(event) {
        if (!ws) return false;
        ws.send(JSON.stringify({
            "Key": event.key,
            "Action": "up",
          }))
    }
    document.onkeydown = function(event) {
        if (!ws) return false;
        ws.send(JSON.stringify({
            "Key": event.key,
            "Action": "down",
          }))
    }
});
</script>
</head>
<body>
  <h1>Press Any Key</h1>
</body>
</html>
